workload: Transaction
operation: read-write
number: 2
title: High risk account mid-account blocked after fast-in and fast-out detected
compositions:
  - name: Transaction / Simple Read / 1
    ref: transaction-simple-read-01
  - name: Transaction / Write / 3
    ref: transaction-write-03
  - name: Transaction / Complex Read / 7
    ref: transaction-complex-read-07
  - name: Transaction / Write / 10
    ref: transaction-write-10
description: |
  With the reads and writes, this query works as:

  * With Transaction / Simple Read / 1, read the blocked status of related account.
  * With Transaction / Write / 3, many transfer edges are inserted. Then enough transfer-out edges from the blocked and unblocked accounts are inserted to the target account.
  * With Transaction / Complex Read / 7, the pattern of Fast-in and Fast-out is detected and the count of the account transfer-ins and transfer-outs is calculated.
  * When the count exceeds a threshold, Transaction / Write / 10 is triggered to mark the account as blocked. 
parameters:
  - name: threshold of transfer-ins and transfer-outs count.
    type: Float
choke_points: []
relevance: |
  It is a typical fraud detection and AWL case in risk control.
