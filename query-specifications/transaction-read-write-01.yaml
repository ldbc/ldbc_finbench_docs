workload: Transaction
operation: read-write
number: 1
title: High risk account blocked after Money-Laundering transfer cycle detected
compositions:
  - name: Transaction / Simple Read / 1
    ref: transaction-simple-read-01
  - name: Transaction / Write / 3
    ref: transaction-write-03
  - name: Transaction / Complex Read / 4
    ref: transaction-complex-read-04
  - name: Transaction / Write / 10
    ref: transaction-write-10
description: |
  With the reads and writes, this query works as:

  * With Transaction / Simple Read / 1, read the blocked status of the account.
  * With Transaction / Write / 3, many transfer edges are inserted. And with enough transfer edges inserted, a transfer cycle via a third-party is formed.
  * With Transaction / Complex Read / 4, a three accounts cycle is detected and the sum of transferred fund amount is calculated.
  * When the amount sum exceeds a threshold, Transaction / Write / 10 is triggered to mark all the account in the cycle as blocked.
parameters:
  - name: threshold of amount sum
    type: Float
choke_points: []
relevance: |
  It is a typical AWL case in risk control.
