workload: Transaction
operation: complex-read
number: 11
title: Transfer trace after loan applied
description: |
  Given a *Loan*, trace the fund *transfer* or *withdraw* by at most 3 steps
  from the *account* the *Loan* connects with *deposit* relationship. Return
  all the accounts at each step. Note that the transfer path of *edge1*, *edge2*,
  *edge3*, *edge4* are in ascending order in terms of timestamp and in descending
  order in terms of amount. Each *transfer's* amount between the account and the
  upstream account should exceed a specified *threshold*. Return all the *accounts*'s
  id in each step.
parameters:
  - name: id
    type: ID
    description: id of the dstAccount
  - name: threshold
    type: 64-bit Integer
    description: threshold of transfer amount
result:
  - name: o1Account
    type: "[ID]"
  - name: o2Account
    type: "[ID]"
  - name: o3Account
    type: "[ID]"
choke_points: [0.0]
relevance: |
  This query is a typical main fund trace case after loan granted in risk
  control.
