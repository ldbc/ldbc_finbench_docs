workload: Transaction
operation: complex-read
number: 12
title: Guarantee Chain Detection
description: |
  Given a *Person* and a specified time window between *start_time* and
  *end_time*, find all the persons in the gurantee chain until end and their
  loans applied. Return the sum of *loan* amount and the count of distinct
  *loan*s.
parameters:
  - name: id
    type: ID
    description: id of the Person
  - name: startTime
    type: DateTime
    description: begin of the time window
  - name: endTime
    type: DateTime
    description: end of the time window
result:
  - name: sumLoanAmount
    type: 64-bit Integer
    category: aggregated
  - name: numLoans
    type: 32-bit Integer
    category: aggregated
choke_points: [3.2, 3.4, 6.2, 7.4, 8.7]
relevance: |
  This is a typical cycle detection in guarantee.
